---
title: "Пратикум по основам языка R"
author: "Вадим Хайтов, Анастасия Лянгузова"
output:
  html_document:
    toc: yes
    toc_depth: 2
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library("knitcitations")
cleanbib()

```


## Получение справки

Какой параметр функции `metaMDS()` отвечает за выбор меры индекса разлчия между сравниваемыми объектами.  


## R как калькулятор, математические операции


Напишите код, который позволит найти решение этого примера

$$
\log_2 \left(\frac{2 \cdot arcsin(\sqrt{0.5}) \cdot \frac{180}{\pi}-\sqrt[4]{11} }{(10 + e^2) \cdot 50}\right) =
$$



## Переменные и оформление кода

1. Cкачайте к себе на компьютер датасет `catsM.xlsx`.

2. Скопируйте приведнный ниже код в окно скрипта RStudio и перепишите его так, чтобы он полностью выполнялся, если его выделить целиком и нажать Ctrl+Enter 

```{r, echo=TRUE, eval=FALSE}
summary(Model)
plot(Model, page = 1)
cat <- read_excel("data/catsM.xlsx")
Model <- lm(Hwt ~ Bwt, data = )
par(mfrow = c(2, 2))
library(readxl)
str cat
install.packages("readxl")



```



## Структура данных

Вызовите встроенный датасет `CO2`. 

Определите, какая из переменных является упорядоченным фактором. В какой последовательности располагаются градации этого фактора. 


## Векторы{.smaller} 

Выполните следующий код

```{r, echo = T, eval=FALSE}
n <- round(runif(1, min = 10, max = 50),0)
vector <- round(rnorm(n, 0, 1), 0)
```

Напишите код, который даст следующие характеристики полученного вектора.

1. Количество чисел в нем.   
2. Среднее значение в этом векторе.   
3. Срднеквадратичное отклонение для данного ветора.
3. Отношение количества чисел равных нулю  к общему количеству чисел в данном ряду (можно использовать только одну функцию).




## Датафреймы{.smaller}

Напишите код, который создаст следующий  датафрейм (назовите этот датафрейм `df`)

```{r}
df <- data.frame(Var_1 = rep(letters[1:9], each =2), Var_2 = seq(1, 100, length.out = 18), Var_3 = NA)
df
```

## Датафреймы{.smaller}

Напишите код, который изменит созданный вами датафрейм следующим образом

```{r}
df <- data.frame(Var_1 = rep(letters[1:9], each =2), Var_2 = seq(1, 100, length.out = 18), Var_3 = NA)

df$Var_3[5:8] <- 10:13

df
```

## Датафреймы{.smaller}

Напишите код, который изменит созданный вами датафрейм следующим образом

```{r}
names(df) <- c("VarOne", "VarTwo", "VarThr")
df
```


## Датафреймы{.smaller}

Напишите код, который вберет из датафрейма `df` только те строки, в которых переменная `VarOne` принимает значения `i, c, f`.

Должен получиться вот такой результат

```{r}
df[df$VarOne %in% c("i", "c", "f"), ]
```


## Датафреймы{.smaller}

Напишите код, который выберет из датафрейма `df` только переменные `VarOne` и `VarThr`

Должен получиться вот такой результат (возможно несколько решений)

```{r}
df[ , c("VarOne", "VarThr")]
```

## Датафреймы{.smaller}

Напишите код, который преобразует колонку `VarTwo` так, что получится следующий результат (возможно несколько решений)

```{r}
df$VarTwo <- round(df$VarTwo, 1)
df
```


## Датафреймы{.smaller}

Напишите код, который добавит в датафрейм переменную, которая отражает квадрат отклонения каждого из элементов переменной VarTwo от среднего значения для всей этой переменной. Должен получиться вот такой результат.


```{r}
df$Dev <- (df$VarTwo - mean(df$VarTwo))^2
df
```


## Датафреймы{.smaller}

Напишите код, который добавит в датафрейм логическую переменную. Должен получиться вот такой результат.


```{r}
df$Logical <- is.na(df$VarThr)
df
```

## Датафреймы{.smaller}

Используя именно эту логическую переменную, проведите фильтрацию датафрейма так, чтобы получиться вот такой результат.


```{r}
df[!df$Logical, ]
```

## Пользовательские функции

Напишите функцию которая осуществляла бы решение квадратного уравнения

$$
ax^2 + bx + c = 0
$$


$$
D = b^2 - 4ac
$$
$$
x = \frac{-b \pm \sqrt{D}}{2a}
$$



Пусть функция будет иметь  название `sqeq()`. 

```{r}
sqeq <- function(a, b, c){
  D <- b^2 - 4 * a * c
  if(D < 0) print("Нет корней")
  if(round(D) == 0) print(paste("Один корень: ", -b/(2*a)))
  if(D > 0) paste("Первый корень: ", -b + sqrt(D)/(2*a), " Второй корень: ", -b - sqrt(D)/(2*a))
}
```


## Пользовательские функции

Для уравнения 

$$
2x^2 + 3x +1 = 0
$$
функция должна выдавать такой результат

```{r echo=TRUE}
sqeq(a = 2, b = 3, c = 1)
```


## Пользовательские функции

Для уравнения 

$$
4x^2 + 4x + 1 = 0
$$
функция должна выдавать такой результат

```{r echo=TRUE}
sqeq(a = 4, b = 4, c = 1)

```

## Пользовательские функции

Для уравнения 

$$
10x^2 + 4x + 1 = 0
$$

функция должна выдавать такой результат

```{r echo=TRUE}
sqeq(a = 10, b = 4, c = 1)

```

